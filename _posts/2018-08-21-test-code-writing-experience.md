---
title: '배민찬 프로젝트에서의 Test Code 작성 경험'
tag: [ test ]
---

(작성중) 

## 공부과정

1. 테스트 환경구성 (호환성 체크)
2. 테스트 이론 공부 (테스트라는 환경에 들어가기 위한 최소한의 지식)<br>
  주요 키워드가 무엇인지 위주로<br>
  처음엔 라이브러리를 먼저 공부했으나 모르는 용어가 많아 찾아보다가 테스트 공학 용어라는 것을 알고 필요성을 느껴 공부
3. 라이브러리 기초 익히기 (공식문서 + 구글검색)
4. 테스트 코드 벤치마킹 (주로 tui 오픈소스) + 내 테스트코드 작성 + 더 잘 짜려면 어떻게 해야 할까 고민 및 메모

## 테스트 환경구성

- Unit Test ⇒ test.html을 만들고 node server로 라우팅하여, 브라우저에서 확인
  - mocha.js (test framework)
  - chai.js (assertion library)
  - sinon.js (test double library)
- E2E Test (가볍게) ⇒ node.js로 확인
  - testcafe (e2e node module)

(coverage까지도 경험해보고 싶었으나, 모듈방식 호환문제를 해결하지 못하여서 일단 생략하였습니다.)

## 테스트 결과

### [unit] helpers.test.js (유틸 메서드 모음)

[](https://www.notion.so/d636ca35131b411aa610686992832716#f5c1b22202d843c9b718795781f1ae37)

### [unit] AutoCompleteSearcher.test.js (자동완성검색 UI)

[](https://www.notion.so/d636ca35131b411aa610686992832716#ef9ebed4e8574999816e00b0931dbfe3)

### [e2e] autoCompleteSearcher.test.js



## 테스트 이론 (키워드 파악)



## 테스트 전략

테스트 코드는 기존 코드의 로직이 보이지 않는 곳에서  
description과 테스트타겟의 메서드명 만으로 테스트코드를 이해할 수 있어야 하기에  
**가독성, 특히 일관성있는 구조**가 필요하다고 생각되어  
아래와 같은 전략을 설계하여 코드를 일관성있게 짜보았다. 



## 테스트코드 작성 중 만났던 고민과 해결책



## (테스트를 통한) 기존코드 수정사항

밸리데이션

- storage가 구조를 제안한 parentStorage를 상속받지 않았을 경우 에러를 throw하도록 수정 (_checkModule)
- 클래스 생성시 필수옵션인  wrapperElem이 없을 경우 에러를 throw하도록 수정
- 벨리데이션을 이상하게 하고 있던 부분이 확인되어 수정

코드 가독성

- 변수명: 목적이 명확하게 보이지 않는 이름을 많이 개선
- 메서드 선언순서 : 동작이 발생되는 순서로 일부 개선하여 코드파악을 쉽게 함

(언젠가는 문제가 될 수도 있었던) 티 안나던 기능실수 개선

- 자동완성 목록을 close하는 메서드가 중복되는 시나리오가 있다는 걸 알게 되어 개선함. (spy로 호출 횟수를 expect 하던 중)

기타 개선

- 스토리지 이름을 종류별로 (최근목록, 검색응답데이터) 받던 것을 --> 대표이름 하나만 받게 하고 내부적으로 두 개로 나눠 사용하게 하여 개발자를 위한 UX 개선

다행히 리팩토링을 많이 한 덕인지 함수를 더 쪼개야 하는 식의 리팩토링은 많이 없었던 거 같다.
일부 코드만 작업하였기 때문에, 모두 테스트한다면 또 다른 식의 리팩토링을 하게 될 수도 있겠다 생각함.

## 느낀 점


## 좀 더 발전하고 싶은 방향


